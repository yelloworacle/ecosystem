<div id="career" class="card margin-bottom:15px" template>
	<div class="card-content margin-bottom:15px">
		<div class="card-field full-width">
			<label class="card-label">Career Name:</label>
			<p class="card-value">{{object.name}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Sense Of Purpose:</label>
			<p class="card-value">{{object.senseOfPurpose}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Healing Effect:</label>
			<p class="card-value">{{object.healingEffect}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Brings Joy:</label>
			<p class="card-value">{{object.bringsJoy}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Average Salary:</label>
			<p class="card-value">{{object.salary}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Stress Level:</label>
			<p class="card-value">{{object.stress}}</p>
		</div>

		<div class="card-field">
			<label class="card-label">Pros:</label>
			<p class="card-value">{{object.pros}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Cons:</label>
			<p class="card-value">{{object.cons}}</p>
		</div>
		<div class="card-field full-width">
			<label class="card-label">Interesting Fact:</label>
			<p class="card-value">{{object.facts}}</p>
		</div>
	</div>
	<div class="additional-container width:100%">
		<div
			class="card display:flex align-items:center flex-wrap:wrap gap:10px padding:10px width:100% margin-bottom:15px">
			<div
				click-closest=".additional-container #additional-list"
				click-attribute="hidden"
				click-value=""
				toggle-selector=":first-child"
				toggle-attribute="src"
				toggle-value="../assets/svg/angle-down.svg, ../assets/svg/angle-right.svg"
				class="display:flex align-items:center gap:10px flex-grow:1 width:100%">
				<i src="../assets/svg/angle-right.svg"></i>
				<span>Additional Details</span>
			</div>
		</div>
		<div
			class="card width:100% margin-bottom:15px"
			id="additional-list"
			hidden>
			<div class="card-content">
				<div class="card-field">
					<label class="card-label">Apprentice:</label>
					<p class="card-value">{{object.apprentice}}</p>
				</div>
				<div class="card-field">
					<label class="card-label">Satisfaction:</label>
					<p class="card-value">{{object.satisfaction}}</p>
				</div>
				<div class="card-field full-width">
					<label class="card-label">Sacrifices:</label>
					<p class="card-value">{{object.sacrifices}}</p>
				</div>

				<div class="card-field full-width">
					<label class="card-label">Characteristics:</label>
					<p class="card-value">{{object.characteristics}}</p>
				</div>
				<div class="card-field full-width">
					<label class="card-label">Career Path Variability:</label>
					<p class="card-value">{{object.careerPathVariability}}</p>
				</div>

				<div class="card-field full-width">
					<label class="card-label">Why:</label>
					<p
						class="card-value"
						array="users"
						object="$user_id"
						key="why.{{object._id}}"
						input-if="false"
						input-next=".createWhy"
						input-attribute="$click"
						value-dispatch></p>

					<form api="openai">
						<input
							openai="chat.completions.create"
							openai-key="model"
							value="gpt-4o-mini"
							hidden />

						<input
							openai="chat.completions.create"
							openai-key="messages[0].role"
							value="system"
							hidden />
						<textarea
							array="ai"
							object
							key="content"
							save="false"
							filter-query-key="name"
							filter-query-value="Why Career"
							openai="chat.completions.create"
							openai-key="messages[0].content"
							hidden></textarea>

						<input
							openai="chat.completions.create"
							openai-key="messages[1].role"
							value="user"
							hidden />
						<input
							array="users"
							object="$user_id"
							key="questions"
							save="false"
							openai="chat.completions.create"
							openai-key="messages[1].content"
							hidden />

						<input
							openai="chat.completions.create"
							openai-key="messages[2].role"
							value="user"
							hidden />
						<input
							openai="chat.completions.create"
							openai-key="messages[2].content"
							value="career name: {{object.name}}"
							hidden />
						<textarea
							class="whyCareerResult"
							realtime="true"
							crdt="false"
							array="users"
							object="$user_id"
							key="why.{{object._id}}"
							openai="chat.completions.create"
							openai-key="choices[0].message.content"
							openai-request="false"
							hidden></textarea>
						<a
							class="createWhy"
							actions="openai.chat.completions.create, save"></a>
					</form>
				</div>

				<div class="width:100% margin-top:10px subscribed">
					<!-- <button
						class="unlock width:100% flex-grow:1 margin-top:20px font-size:16px">
						<a state_to="mainView" state-src="./checkout/"
							>Subscribe to unlock additional details</a
						>
					</button>

					<a
						id="show-example"
						show="$document  #example"
						hide="$document  #oracle"
						class="display:block padding:10px text-align:center color:#1a73e8 text-decoration:underline:hover"
						>View an example of subscribed career details</a
					> -->
				</div>
			</div>
		</div>
	</div>

	<div class="jobs-container width:100%">
		<div
			class="card display:flex align-items:center gap:10px margin-bottom:15px padding:0px!important">
			<div
				click-closest=".jobs-container #jobs-list"
				click-attribute="hidden"
				click-value=""
				toggle-selector=":first-child"
				toggle-attribute="src"
				toggle-value="../assets/svg/angle-down.svg, ../assets/svg/angle-right.svg"
				class="display:flex align-items:center gap:10px flex-grow:1">
				<i
					class="padding:20px_0px_20px_20px"
					src="../assets/svg/angle-right.svg"></i>
				<span class="width:100%">Jobs</span>
				<div
					class="display:flex justify-content:flex-end align-items:center gap:15px transition:0.3s position:relative"
					click-selector=".options"
					click-attribute="class"
					click-value="display:inline-flex!important">
					<a
						id="addAddress"
						state_to="mainView"
						state-src="./account/profile/"
						class="display:flex align-items:center gap:10px width:142px padding-right:20px"
						hidden>
						<i src="./assets/svg/plus.svg"></i>Add Location
					</a>
				</div>
			</div>
		</div>

		<div
			id="jobs-list"
			storage="mongodb"
			array="advertisements"
			object=""
			filter-limit
			render-selector="[template]"
			class="display:flex flex-direction:column margin-top:10px gap:10px"
			hidden>
			<input
				type="text"
				filter-query-key="location.$near.$geometry.type"
				value="Point"
				filter-parent
				hidden />

			<input
				type="text"
				array="users"
				object="$user_id"
				key="location.coordinates"
				filter-query-key="location.$near.$geometry.coordinates"
				value-type="array"
				filter-parent
				hidden />

			<input
				type="number"
				filter-query-key="location.$near.$maxDistance"
				array="users"
				object="$user_id"
				key="maxDistance"
				filter-parent
				hidden />

			<!-- <input
				filter-query-key="careers.$in"
				array="users"
				object="$user_id"
				key="careers"
				value-type="array"
				filter-parent
				hidden /> -->

			<div class="card padding:10px" template render-as="job">
				<div
					intersection-next
					intersection-attribute="$save"
					intersection-if="!$template"></div>
				<input
					type="number"
					array="advertisements"
					object="{{job._id}}"
					key="$inc.impressions"
					value="1"
					read="false"
					hidden />

				<div
					class="display:flex align-items:center justify-content:flex-end margin-bottom:15px">
					<div
						class="display:flex align-items:center gap:10px transition:0.3s"
						hover-selector=".options"
						hover-attribute="class"
						hover-value="display:inline-flex!important">
						<div class="display:none options">
							<a class="padding:5px margin-left:auto">
								<i src="../assets/svg/trash.svg"></i>
							</a>
						</div>
						<i src="../assets/svg/ellipsis-v.svg"></i>
					</div>
				</div>

				<div class="display:flex flex-wrap:wrap gap:20px">
					<div class="card-field full-width">
						<label class="card-label">Job Title:</label>
						<p class="card-value">{{job.name}}</p>
					</div>
					<div class="card-field full-width">
						<label class="card-label">Company Name:</label>
						<p class="card-value">{{job.company}}</p>
					</div>
					<div class="card-field full-width">
						<label class="card-label">Location:</label>
						<span class="card-value">{{job.address}}</span>
					</div>
					<div class="card-field full-width">
						<label class="card-label">Job Description:</label>
						<p class="card-value">{{job.description}}</p>
					</div>
					<div class="card-field full-width">
						<label class="card-label">Requirements:</label>
						<p class="card-value">{{job.requirements}}</p>
					</div>
					<div class="card-field">
						<label class="card-label">Employment Type:</label>
						<p class="card-value">{{job.employment_type}}</p>
					</div>
					<div class="card-field">
						<label class="card-label">Salary:</label>
						<p class="card-value">{{job.salary}}</p>
					</div>
					<div class="card-field">
						<label class="card-label">Years of Experience:</label>
						<p class="card-value">{{job.years_experience}}</p>
					</div>
					<div class="card-field full-width">
						<label class="card-label">Job Category:</label>
						<p class="card-value">{{job.job_category}}</p>
					</div>
					<form>
						<input
							type="number"
							array="advertisements"
							object="{{job._id}}"
							key="$inc.clicks"
							value="1"
							hidden />

						<button
							actions="save, state"
							state_to="mainView"
							state-src="../account/advertise/applicants/form.html">
							Apply
							<div
								state_to="post_id"
								state-value="{{job._id}}"></div>
							<div
								state_to="organization"
								state-object="{{job.organization}}"></div>
						</button>
					</form>
				</div>
			</div>
		</div>
	</div>

	<div class="video-container width:100%">
		<div
			class="card display:flex align-items:center gap:10px margin-bottom:15px padding:0px!important">
			<div
				click-closest=".video-container #video-list"
				click-attribute="hidden"
				click-value=""
				toggle-selector=":first-child"
				toggle-attribute="src"
				toggle-value="../assets/svg/angle-down.svg, ../assets/svg/angle-right.svg"
				class="display:flex align-items:center gap:10px flex-grow:1">
				<i
					class="padding:20px_0px_20px_20px"
					src="../assets/svg/angle-right.svg"></i>
				<span class="width:100%">Career Video</span>
			</div>
		</div>

		<div
			id="video-list"
			class="display:flex flex-direction:column margin-top:10px gap:10px"
			hidden>
			<div class="card padding:10px">
				<label class="card-label">Career Video:</label>
				<video
					controls
					class="width:100%"
					hidden-if="!{{object.video_url}}">
					<source src="{{object.video_url}}" type="video/mp4" />
					Your browser does not support the video tag.
				</video>
				<div
					class="card-value"
					array="careers"
					object="{{object._id}}"
					key="video-script-html"></div>

				<form api="openai">
					<input
						openai="chat.completions.create"
						openai-key="model"
						value="gpt-4o-mini"
						hidden />

					<input
						openai="chat.completions.create"
						openai-key="messages[0].role"
						value="system"
						hidden />
					<textarea
						array="ai"
						object
						key="content"
						save="false"
						filter-query-key="name"
						filter-query-value="Video Script Template"
						openai="chat.completions.create"
						openai-key="messages[0].content"
						hidden></textarea>

					<input
						openai="chat.completions.create"
						openai-key="messages[1].role"
						value="user"
						hidden />
					<input
						openai="chat.completions.create"
						openai-key="messages[1].content"
						value="career name: {{object.name}}"
						hidden />

					<textarea
						array="careers"
						object="{{object._id}}"
						key="video-script"
						openai="chat.completions.create"
						openai-key="choices[0].message.content"
						openai-request="false"
						input-next
						input-attribute="value"
						hidden></textarea>

					<div
						array="careers"
						object="{{object._id}}"
						key="video-script-html"
						input-if="false"
						input-next
						input-attribute="$click"
						value-dispatch
						marked
						hidden></div>

					<a
						class="createScript"
						actions="openai.chat.completions.create, timeout(3000), save"></a>
				</form>
			</div>
		</div>
	</div>
</div>
