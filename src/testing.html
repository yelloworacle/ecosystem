<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>SearchX - SEO Solutions</title>
		<link rel="stylesheet" href="styles.css" />
		<link rel="manifest" href="./manifest.webmanifest" />
	</head>
	<body>
		<header>
			<div class="card padding:10px">
				<label class="card-label">1. Generate Video Script</label>
				<form api="openai" id="form-creative-script">
					<input
						openai="chat.completions.create"
						openai-key="model"
						value="gpt-4o-mini"
						hidden />

					<input
						openai="chat.completions.create"
						openai-key="messages[0].role"
						value="system"
						hidden />
					<textarea
						array="ai"
						object
						key="content"
						save="false"
						filter-query-key="name"
						filter-query-value="Veed Video Script JSON"
						openai="chat.completions.create"
						openai-key="messages[0].content"
						hidden></textarea>

					<input
						openai="chat.completions.create"
						openai-key="messages[1].role"
						value="user"
						hidden />
					<input
						openai="chat.completions.create"
						openai-key="messages[1].content"
						value="Generate the script for career: Auto Mechanic"
						hidden />

					<textarea
						openai="chat.completions.create"
						openai-key="choices[0].message.content"
						openai-request="false"
						input-query="$document #veed-elements"
						input-attribute="value">
					</textarea>
					<!-- <textarea
						array="careers"
						object="{{object._id}}"
						key="raw_script_markdown"
						openai="chat.completions.create"
						openai-key="choices[0].message.content"
						openai-request="false"
						input-query="$document #veed-elements "
						input-attribute="value"
						hidden>
					</textarea> -->

					<button
						type="button"
						actions="openai.chat.completions.create">
						Generate Script
					</button>
				</form>
			</div>

			<div class="card padding:10px">
				<label class="card-label">2. Generate Video (VEED)</label>

				<video
					controls
					class="width:100%"
					hidden-if="!{{object.video_url}}">
					<source src="{{object.video_url}}" type="video/mp4" />
					Your browser does not support the video tag.
				</video>
				<div
					class="card-value"
					hidden-if="!{{object.video_url}}"
					style="margin-top: 5px">
					<small>Video URL: {{object.video_url}}</small>
				</div>
				<div
					class="status-message margin-top:5px"
					hidden-if="{{object.video_url}} || {{object.video_error}}">
					Waiting for JSON transformation...
				</div>
				<div class="error-message" hidden-if="!{{object.video_error}}">
					Error generating video: {{object.video_error}}
				</div>

				<form api="veed" id="form-veed-call" style="margin-top: 10px">
					<input
						veed="renders.create"
						veed-key="name"
						value="Career Video for {{object.name}}"
						hidden />
					<input
						veed="renders.create"
						veed-key="output.format"
						value="mp4"
						hidden />
					<input
						veed="renders.create"
						veed-key="output.resolution"
						value="1080p"
						hidden />
					<input
						id="veed-elements"
						type="hidden"
						veed="renders.create"
						veed-key="elements"
						value-type="json"
						input-query="$closest('form') [actions]"
						input-attribute="$click" />
					<!-- <input
						type="hidden"
						key="elements_json_representation"
						array="careers"
						object="{{object._id}}"
						veed="renders.create"
						veed-key="elements"
						value-type="json"
						input-query="$closest('form') [actions]"
						input-attribute="$click" /> -->

					<input
						type="hidden"
						array="careers"
						object="{{object._id}}"
						key="video_error"
						veed="renders.create"
						veed-key="error"
						veed-request="false"
						input-query="$next"
						input-attribute="value" />
					<button
						type="button"
						actions="veed.renders.create, save"
						style="display: none"
						aria-hidden="true"></button>
				</form>
			</div>
		</header>

		<script src="./dist/CoCreate.js"></script>
	</body>
</html>
