<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />

        <title>{{object.meta-title}}</title>
        <meta name="description" content="{{object.meta-description}}" />
        <meta name="keywords" content="{{object.meta-keywords}}" />
        <meta name="robots" content="index, follow" />
        <meta name="author" content="{{object.author}}" />
        <meta name="generator" content="Yellow Oracle" />

        <!-- Canonical Tag -->
        <link rel="canonical" href="https://yelloworacle.com" />

        <link
            rel="icon"
            type="image/png"
            sizes="32x32"
            href="../assets/favicon.ico" />

        <!-- Open Graph Tags (Facebook) -->
        <meta property="og:title" content="{{object.meta-title}}" />
        <meta property="og:description" content="{{object.meta-description}}" />
        <meta property="og:url" content="https://yelloworacle.com" />
        <meta
            property="og:image"
            content="https://yelloworacle.com/assets/image.jpg" />
        <meta property="og:type" content="website" />

        <!-- Twitter Card Tags (Twitter) -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="YellowOracle" />
        <meta name="twitter:title" content="{{object.meta-title}}" />
        <meta
            name="twitter:description"
            content="{{object.meta-description}}" />
        <meta
            name="twitter:image"
            content="https://yelloworacle.com/assets/twitter-image.jpg" />

        <!-- Structured Data (Schema Markup) -->
        <script type="application/ld+json">
            {
                "@context": "http://schema.org",
                "@type": "WebPage",
                "name": "Yellow Oracle - Discover your destiny",
                "description": "Chart and Envision Your Future's Many Paths",
                "url": "https://yelloworacle.com",
                "image": "https://yelloworacle.com/image.jpg",
                "author": {
                    "@type": "Organization",
                    "name": "Yellow Oracle"
                }
            }
        </script>

        <link
            rel="stylesheet"
            href="../index.css"
            array="files"
            object="65395d6f6ebd31be4c4349b2"
            key="{}"
            type="text/css"
            parse="true" />
        <link rel="manifest" href="../manifest.webmanifest" />
    </head>

    <body>
        <!-- Navbar  -->
        <nav
            content_id="content"
            scroll="sticky-nav,"
            scroll-up="5"
            scroll-down="5"
            path="../"
            src="../components/navbar.html"></nav>

        <!-- SideNav Left-->
        <sidenav
            id="menuL"
            class="top:0px left:0px width:300px@lg@xl"
            path="../"
            src="../components/sidenav.html"
            resize-selector="document; main, document; footer"
            resize-attribute="style"
            resize-property="margin-left"
            session
            input-selector="[actions][]"
            input-attribute="href"
            input-value="../"></sidenav>

        <!-- Main Content -->
        <main>
            <div class="max-width:800px">
                <!--  Post Category Start  -->
                <div
                    array="blog-posts"
                    object=""
                    key="category"
                    render-selector="[template]"
                    class="padding:0_20px width:100% margin-top:20px display:flex flex-wrap:wrap gap:10px">
                    <a
                        class="border-radius:5px padding:2px_5px background:#F23A2E color:#fff color:#ddd:hover font-size:12px@sm display:none:empty"
                        href="#"
                        >{{object.category}}</a
                    >
                </div>

                <h1
                    class="padding:0_20px margin-top:20px font-size:37px font-size:25px@xs@sm word-spacing:5px">
                    {{object.title}}
                </h1>

                <div
                    class="padding:0_20px margin-top:20px display:flex flex-wrap:wrap gap:10px">
                    <span
                        >By
                        <a class="font-weight:bold">{{object.author}}</a></span
                    >
                    <input
                        type="date"
                        value="{{object.published}}"
                        value-type="toLocaleDateString"
                        onload-next
                        onload-attribute="value"
                        hidden />
                    <span></span>

                    <form hidden>
                        <input
                            type="number"
                            array="blog-posts"
                            object="{{object._id}}"
                            key="$inc.views"
                            value="1"
                            hidden />
                        <input onload-next onload-attribute="$click" />
                        <div actions="timeout(2000), save"></div>
                    </form>
                    <i src="../assets/svg/eye.svg"></i>
                    <span array="blog-posts" object="{{object._id}}" key="views"
                        >{{object.views}}</span
                    >

                    <a href="#comments">
                        <i src="../assets/svg/comment-alt.svg"></i>
                        <span
                            array="comments"
                            object
                            key="$length"
                            filter-key="post_id"
                            filter-value="{{object._id}}"
                            >0</span
                        >
                    </a>
                </div>

                <div class="margin:20px border-bottom:1px_solid_#ddd"></div>

                <!--  Social Icon Start  -->
                <div
                    class="padding:0_20px"
                    share-network="true"
                    share-url="$href"
                    share-title="{{object.title}}"
                    share-height="600"
                    share-width="600"
                    share-media="{{object.image[0].src}}">
                    <div
                        class="display:flex flex-wrap:wrap gap:20px font-size:18px">
                        <a href="#" share-network="facebook">
                            <i src="../assets/svg/facebook-f.svg"></i>
                        </a>
                        <a href="#" share-network="twitter"
                            ><i src="../assets/svg/twitter.svg"></i
                        ></a>
                        <a href="#" share-network="linkedin"
                            ><i src="../assets/svg/linkedin-in.svg"></i
                        ></a>
                        <a share>
                            <i src="../assets/svg/share-alt.svg"></i>
                        </a>
                    </div>
                </div>
                <!--  Social Icon End  -->

                <div class="margin:20px border-bottom:1px_solid_#ddd"></div>

                <!--  Post Media -->
                <div class="padding:0_20px margin-bottom:15px width:100%">
                    <!-- Image -->
                    <img src="{{object.image[0].src}}" width="100%" />

                    <!-- Video -->
                    <video
                        width="100%"
                        controls
                        poster="{{object.image[0].src}}"
                        onloadeddata="this.previousElementSibling.style.display='none';"
                        onerror="this.style.display='none';">
                        <source
                            src="{{object.video[0].src}}"
                            type="video/mp4" />
                        Your browser does not support the video tag.
                    </video>
                </div>

                <!--  Post Content -->
                <div class="padding:0_20px width:100%">{{object.content}}</div>

                <div class="margin:20px border-bottom:1px_solid_#ddd"></div>

                <!--  Comment Start  -->
                <h3 class="padding:0_20px">Comments</h3>

                <input
                    type="hidden"
                    filter-next
                    filter-key="post_id"
                    filter-value="{{object._id}}" />
                <div
                    id="comments"
                    class="padding:0_20px margin-bottom:20px margin-top:20px width:100%"
                    array="comments"
                    object
                    filter-limit="20"
                    render-selector="[template]">
                    <div template render-as="comment">
                        <div class="display:flex padding:20px_0">
                            <!-- Avatar -->
                            <div
                                class="avatar round width:30px!important height:30px!important margin-right:10px"
                                background-color="random">
                                <span class="avatar-name">
                                    {{comment.name}}
                                </span>
                                <span class="avatar-image">
                                    <img
                                        array="users"
                                        object="$user_id"
                                        key="avatar"
                                        onerror="this.style.display='none'"
                                        width="40px" />
                                </span>
                            </div>

                            <div class="flex-grow:1">
                                <span class="margin-right:10px"
                                    >{{comment.name}}</span
                                >
                                <span>
                                    <input
                                        type="date"
                                        value="{{comment.created.on}}"
                                        value-type="toLocaleDateString"
                                        onload-next
                                        onload-attribute="value"
                                        hidden />
                                    <span></span>
                                </span>
                                <div
                                    class="margin-bottom:8px font-size:14px@sm font-size:13px@xs">
                                    <p>{{comment.comment}}</p>
                                </div>

                                <div class="display:flex">
                                    <form>
                                        <input
                                            type="number"
                                            array="blog-posts"
                                            object="{{object._id}}"
                                            key="$inc.likes"
                                            value="1"
                                            hidden />
                                        <a actions="save"
                                            ><i
                                                src="../assets/svg/thumbs-up.svg"></i
                                        ></a>
                                    </form>
                                    <span
                                        array="blog-posts"
                                        object="{{object._id}}"
                                        key="likes"
                                        >{{object.likes}}</span
                                    >

                                    <!-- <a href="#"
                                    ><i src="../assets/svg/thumbs-down.svg"></i
                                ></a> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  Comment End  -->
                </div>

                <div class="margin:20px border-bottom:1px_solid_#ddd"></div>

                <!--  Post COMMENT Start  -->
                <form
                    array="comments"
                    object=""
                    class="width:100% margin:20px_0 padding:0_20px display:flex flex-direction:column gap:20px">
                    <input type="hidden" key="post_id" value="{{object._id}}" />
                    <div class="display:flex padding:20px_0">
                        <!-- Avatar -->
                        <div
                            class="avatar round width:30px!important height:30px!important margin-right:10px">
                            <span
                                array="users"
                                object="$user_id"
                                key="name"
                                class="avatar-name">
                            </span>
                            <span class="avatar-image">
                                <img
                                    array="users"
                                    object="$user_id"
                                    key="avatar"
                                    onerror="this.style.display='none'"
                                    width="40px" />
                            </span>
                        </div>

                        <div class="flex-grow:1">
                            <floating-label>
                                <textarea
                                    rows="1"
                                    placeholder="Add a comment..."
                                    key="comment"
                                    required
                                    auto-rows></textarea>
                            </floating-label>
                        </div>
                    </div>

                    <button actions="validate, save">Post Comment</button>
                </form>
                <input
                    type="hidden"
                    key="_id"
                    localstorage-get="user_id"
                    localstorage-if="false"
                    localstorage-next="#createUser"
                    localstorage-attribute="$click" />

                <form array="users" object="" hidden>
                    <input key="_id" localstorage-set="user_id" />
                    <input key="answeredQuestions[]" value="Discover" />
                    <input key="subscription" value="false" />
                    <input type="checkbox" key="ambassadorTerms" />
                    <a
                        id="createUser"
                        click-selector="document; #questions"
                        click-attribute="read"
                        click-value="true"
                        actions="timeout(1000), save, localStorage, click"></a>
                </form>

                <form hidden>
                    <floating-label>
                        <input
                            type="text"
                            array="users"
                            object="$user_id"
                            key="name"
                            placeholder="Enter Your Name"
                            required />
                    </floating-label>
                    <floating-label>
                        <input
                            type="email"
                            array="users"
                            object="$user_id"
                            key="email"
                            placeholder="Enter Your Email"
                            required />
                    </floating-label>
                </form>
            </div>
        </main>

        <!-- Footer -->
        <footer
            id="spreadtheword"
            content_id="content"
            path="../"
            src="../components/footer.html"></footer>

        <script src="../dist/CoCreate.js"></script>
        <script>
            document.addEventListener(
                "input",
                function (event) {
                    if (
                        event.target.tagName.toLowerCase() !== "textarea" ||
                        !event.target.hasAttribute("auto-rows")
                    )
                        return;
                    autoResizeTextarea(event.target);
                },
                false
            );

            function autoResizeTextarea(textarea) {
                const lineHeight = parseInt(
                    window.getComputedStyle(textarea).lineHeight
                );
                textarea.rows = 1;
                const lines = Math.ceil(textarea.scrollHeight / lineHeight);
                textarea.rows = lines;
                console.log("libesss");
            }
        </script>
    </body>
</html>
