<!DOCTYPE html>
<a href="./signin.html" session="false" hidden></a>

<div>
    <form
        state_id="form-fields"
        array="blog-posts"
        object=""
        realtime="false"
        class="display:flex flex-wrap:wrap gap:20px max-width:600px padding-top:10px">
        <div
            path="./"
            src="./components/form-toolbar.html"
            class="width:100%"></div>
        <floating-label class="input-300">
            <input
                type="text"
                key="author"
                placeholder="Author Name"
                class="floating-label" />
        </floating-label>
        <floating-label class="input-300">
            <select key="status" class="floating-label">
                <option value="draft">Draft</option>
                <option value="published">Published</option>
                <!-- Other statuses -->
            </select>
        </floating-label>

        <floating-label class="input-600">
            <input
                type="text"
                key="title"
                placeholder="Title"
                class="floating-label" />
        </floating-label>
        <input
            type="hidden"
            key="title"
            input-selector="document; .filename[]"
            input-attribute="value" />

        <input
            type="hidden"
            key="url"
            value-replaceall=" "
            value-replace-with="-"
            value-prefix="/blog/"
            value-suffix=".html"
            class="filename" />

        <floating-label class="input-300">
            <div
                type="file"
                key="image"
                accept="image/*"
                placeholder="Upload Image or Video Thumbnail"
                class="floating-label min-height:24px active"
                render-selector="[template]"
                active>
                <div template>
                    <img src="{{image.src}}" alt="image" width="100%" />
                </div>
            </div>
        </floating-label>

        <floating-label class="input-300">
            <div
                type="file"
                key="video"
                accept="video/*"
                placeholder="Upload Video"
                class="floating-label min-height:24px"
                render-selector="[template]"
                active>
                <div template>
                    <video stream="{{video.src}}" controls width="250"></video>
                </div>
            </div>
        </floating-label>

        <floating-label class="input-300">
            <input
                type="text"
                key="videourl"
                placeholder="Video Url"
                class="floating-label" />
        </floating-label>
        <floating-label class="input-300">
            <input
                type="text"
                key="thumbnailurl"
                placeholder="Thumbnail Url"
                class="floating-label" />
        </floating-label>

        <floating-label class="input-600">
            <textarea
                key="shortDescription"
                placeholder="Short Description"
                class="floating-label"></textarea>
        </floating-label>

        <floating-label class="input-600">
            <editor
                contenteditable="true"
                key="content"
                realtime="true"
                placeholder="Content"
                class="floating-label"></editor>
        </floating-label>

        <floating-label class="input-600">
            <select
                key="category"
                class="floating-label"
                placeholder="Category">
                <option value="">Select Category</option>
                <option value="education">education</option>
            </select>
        </floating-label>

        <floating-label class="input-600">
            <input
                type="text"
                key="tags"
                placeholder="Tags (comma-separated)"
                class="floating-label" />
        </floating-label>

        <floating-label class="input-600">
            <input
                type="text"
                key="meta-title"
                placeholder="Meta Title"
                class="floating-label" />
        </floating-label>

        <floating-label class="input-600">
            <textarea
                key="meta-keywords"
                placeholder="Meta Keywords"
                class="floating-label"></textarea>
        </floating-label>

        <!-- Additional Fields -->

        <floating-label class="input-600">
            <textarea
                key="meta-description"
                placeholder="Meta Description"
                class="floating-label"></textarea>
        </floating-label>

        <input
            key="_id"
            input-selector="document; #publishform"
            input-attribute="object"
            hidden />
        <input type="datetime" key="published" value="$now" hidden />

        <button
            actions="save, state"
            state_to="mainView"
            state-src="./admin/blog/datatable.html"
            class="button-round">
            <i src="./assets/svg/save.svg"></i>
        </button>
        <button
            actions="save, render(document; #publish), timeout(1000), action(document; #sethtml), timeout(1000), action(document; #savefile)">
            Publish
        </button>
    </form>

    <!-- Get ObjectId from blobpost and reuse for file  -->
    <form id="publishform" array="files" object="" upsert="true" hidden>
        <input
            key="name"
            value-replaceall=" "
            value-replace-with="-"
            value-suffix=".html"
            input-next
            input-attribute="value"
            class="filename" />
        <input key="pathname" value-prefix="/blog/" />
        <input key="path" value="/blog" />
        <input key="directory" value="blog" />
        <input key="content-type" value="text/html" />
        <input key="$addToSet.host" value="*" />
        <input key="public" value="true" />

        <div id="publish" render-next render="object"></div>
        <div
            id="sethtml"
            src="./blog/post.html"
            value-type="text"
            click-next
            click-attribute="value"></div>

        <textarea key="src"></textarea>
        <button id="savefile" actions="save" hidden>Publish Post</button>
    </form>
    <div src="./components/toolbar.html" value-type="outerHTML"></div>
</div>
